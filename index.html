<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrustBit - Cryptocurrency Exchange</title>
    <script src="https://unpkg.com/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #0d0a1f 100%);
            color: #e6e6e6;
            overflow-x: hidden;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .logo {
            display: flex;
            align-items: center;
            font-size: 24px;
            font-weight: 600;
            color: #7e6bff;
        }
        .logo svg {
            width: 32px;
            height: 32px;
            margin-right: 10px;
        }
        .nav {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        .nav a {
            color: #e6e6e6;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            opacity: 0.8;
            transition: opacity 0.3s, color 0.3s;
            cursor: pointer;
        }
        .nav a:hover, .nav a.active {
            opacity: 1;
            color: #7e6bff;
        }
        .user-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .profile-dropdown {
            position: relative;
        }
        .profile-btn {
            background: transparent;
            border: none;
            color: #e6e6e6;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .profile-btn::after {
            content: '▼';
            font-size: 10px;
        }
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: #2e1a47;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            min-width: 150px;
            z-index: 100;
        }
        .dropdown-menu.active {
            display: block;
        }
        .dropdown-menu a {
            display: block;
            padding: 10px 15px;
            color: #e6e6e6;
            text-decoration: none;
            font-size: 14px;
        }
        .dropdown-menu a:hover {
            background: rgba(126, 107, 255, 0.2);
        }
        .login-btn, .register-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }
        .login-btn {
            background: transparent;
            color: #e6e6e6;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .register-btn {
            background: #7e6bff;
            color: #fff;
        }
        .login-btn:hover, .register-btn:hover {
            opacity: 0.9;
        }
        .main-content {
            display: none;
            padding: 40px;
        }
        .main-content.active {
            display: block;
        }
        .hero-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 50px 40px;
            background: url('https://via.placeholder.com/1200x400/1a1a2e/ffffff?text=Market+Background') no-repeat center center;
            background-size: cover;
            min-height: 400px;
            position: relative;
        }
        .hero-text h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.2;
        }
        .hero-text p {
            font-size: 16px;
            opacity: 0.7;
            max-width: 450px;
            line-height: 1.5;
        }
        .promotions {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 20px 0;
        }
        .promo-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            min-width: 250px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .promo-card h3 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        .promo-card p {
            font-size: 14px;
            opacity: 0.7;
            margin-bottom: 15px;
        }
        .promo-card .btn-primary {
            background: #7e6bff;
            color: #fff;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            width: 100%;
            transition: all 0.3s;
        }
        .promo-card .btn-primary:hover {
            background: #5a4bff;
        }
        .news-section {
            margin-top: 40px;
        }
        .news-section h2 {
            font-size: 28px;
            margin-bottom: 20px;
        }
        .news-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
        }
        .news-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 10px;
            display: flex;
            flex-direction: column;
        }
        .news-content h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        .news-content p {
            font-size: 14px;
            opacity: 0.7;
            line-height: 1.4;
        }
        .news-content .source {
            font-size: 14px;
            color: #7e6bff;
            margin-top: 5px;
        }
        .portfolio-grid {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        .portfolio-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            flex: 1;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 200px;
        }
        .portfolio-amount {
            font-size: 24px;
            font-weight: 600;
            margin: 10px 0;
        }
        .portfolio-value {
            font-size: 18px;
            color: #7e6bff;
        }
        .crypto-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin: 0 auto 10px;
        }
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .wallet-section {
            text-align: left;
        }
        .wallet-section h2 {
            margin-bottom: 20px;
            color: #7e6bff;
            font-size: 28px;
        }
        .balance {
            font-size: 36px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #43e97b;
        }
        .deposit-form {
            margin-top: 30px;
        }
        .input-group {
            margin-bottom: 20px;
        }
        .input-group label {
            display: block;
            font-size: 14px;
            margin-bottom: 5px;
            font-weight: 500;
        }
        .input-group select, .input-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #e6e6e6;
            font-size: 14px;
        }
        .input-group input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        .wallet-address {
            font-family: monospace;
            font-size: 14px;
            word-break: break-all;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-top: 10px;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            width: 100%;
        }
        .btn-primary {
            background: linear-gradient(45deg, #7e6bff 0%, #5a4bff 100%);
            color: #fff;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(126, 107, 255, 0.3);
        }
        .trading-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .crypto-list {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            max-height: 600px;
            overflow-y: auto;
        }
        .crypto-list::-webkit-scrollbar {
            width: 8px;
        }
        .crypto-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        .crypto-list::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #7e6bff, #5a4bff);
            border-radius: 10px;
        }
        .crypto-list::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #5a4bff, #7e6bff);
        }
        .crypto-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s;
        }
        .crypto-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        .crypto-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .crypto-price {
            text-align: right;
        }
        .price {
            font-size: 18px;
            font-weight: 600;
        }
        .change {
            font-size: 14px;
        }
        .change.positive {
            color: #43e97b;
        }
        .change.negative {
            color: #f5576c;
        }
        .order-book {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }
        .order-book h3 {
            font-size: 18px;
            margin-bottom: 15px;
        }
        .order-book-table {
            width: 100%;
            border-collapse: collapse;
        }
        .order-book-table th, .order-book-table td {
            padding: 8px;
            text-align: right;
            font-size: 14px;
        }
        .order-book-table .buy {
            color: #43e97b;
        }
        .order-book-table .sell {
            color: #f5576c;
        }
        .trading-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .buy-sell-form {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
        }
        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s;
        }
        .tab.active {
            background: linear-gradient(45deg, #7e6bff 0%, #5a4bff 100%);
        }
        .chart-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            flex-grow: 1;
            height: 400px;
        }
        .chart {
            width: 100%;
            height: 100%;
        }
        .timeframe-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        .timeframe-btn {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #e6e6e6;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .timeframe-btn.active {
            background: #7e6bff;
            border-color: #7e6bff;
        }
        .timeframe-btn:hover {
            background: rgba(126, 107, 255, 0.3);
        }
        .transactions-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .transactions-table th,
        .transactions-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .transactions-table th {
            background: rgba(255, 255, 255, 0.1);
            font-weight: 600;
        }
        .status {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }
        .status.success {
            background: rgba(67, 233, 123, 0.2);
            color: #43e97b;
        }
        .status.failed {
            background: rgba(245, 87, 108, 0.2);
            color: #f5576c;
        }
        .footer {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px 40px;
            text-align: center;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        .footer a {
            color: #7e6bff;
            text-decoration: none;
            margin: 0 10px;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .support-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(45deg, #7e6bff, #5a4bff);
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
            z-index: 1000;
        }
        .support-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(126, 107, 255, 0.5);
        }
        .support-chat {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 300px;
            height: 400px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: none;
            flex-direction: column;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }
        .support-chat.active {
            display: flex;
        }
        .chat-header {
            background: rgba(126, 107, 255, 0.2);
            padding: 10px;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chat-header h3 {
            font-size: 16px;
            color: #7e6bff;
        }
        .chat-close {
            background: none;
            border: none;
            color: #e6e6e6;
            font-size: 16px;
            cursor: pointer;
        }
        .chat-body {
            flex-grow: 1;
            padding: 10px;
            overflow-y: auto;
        }
        .chat-message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 10px;
            font-size: 14px;
            max-width: 80%;
        }
        .chat-message.user {
            background: #7e6bff;
            color: #fff;
            margin-left: auto;
        }
        .chat-message.support {
            background: rgba(255, 255, 255, 0.1);
            color: #e6e6e6;
        }
        .chat-input {
            display: flex;
            padding: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        .chat-input input {
            flex-grow: 1;
            padding: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #e6e6e6;
            font-size: 14px;
            margin-right: 5px;
        }
        .chat-input button {
            background: #7e6bff;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
        }
        .chat-input button:hover {
            background: #5a4bff;
        }
        .custom-footer {
            background: rgba(255, 255, 255, 0.05);
            padding: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 20px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .footer-section {
            flex: 1;
            min-width: 200px;
            text-align: left;
        }
        .footer-section h3 {
            font-size: 16px;
            color: #7e6bff;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .footer-section a {
            display: block;
            color: #e6e6e6;
            text-decoration: none;
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 10px;
            transition: opacity 0.3s;
        }
        .footer-section a:hover {
            opacity: 1;
            color: #7e6bff;
        }
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            .trading-section {
                grid-template-columns: 1fr;
            }
            .header {
                flex-direction: column;
                gap: 20px;
            }
            .nav {
                flex-wrap: wrap;
                justify-content: center;
            }
            .hero-section {
                flex-direction: column;
                text-align: center;
            }
            .hero-text h1 {
                font-size: 36px;
            }
            .promotions {
                flex-direction: column;
                align-items: center;
            }
            .promo-card {
                width: 100%;
                max-width: 300px;
            }
            .support-chat {
                width: 90%;
                right: 5%;
            }
            .chart-container {
                height: 300px;
            }
            .custom-footer {
                flex-direction: column;
                padding: 20px;
            }
            .footer-section {
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
                <path d="M12 8H20V12H16V24H12V12H8V8H12Z" fill="white"/>
                <defs>
                    <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                        <stop stop-color="#7e6bff"/>
                        <stop offset="1" stop-color="#5a4bff"/>
                    </linearGradient>
                </defs>
            </svg>
            TrustBit
        </div>
        <nav class="nav">
            <a href="#" onclick="showSection('dashboard')" class="active">Home</a>
            <a href="#" onclick="showSection('trading')">Trade</a>
            <a href="#" onclick="showSection('wallet')">Wallet</a>
            <a href="#" onclick="showSection('portfolio')">Portfolio</a>
            <a href="#" onclick="showSection('history')">History</a>
        </nav>
        <div class="user-controls">
            <div class="profile-dropdown">
                <button class="profile-btn">Profile</button>
                <div class="dropdown-menu">
                    <a href="#">Settings</a>
                    <a href="#">Wallet</a>
                    <a href="#">Logout</a>
                </div>
            </div>
            <button class="login-btn">Login</button>
            <button class="register-btn">Register</button>
        </div>
    </header>
    <div id="dashboard" class="main-content active">
        <div class="hero-section">
            <div class="hero-text">
                <h1>Trade with TrustBit</h1>
                <p>A reliable and secure platform for cryptocurrency trading. Start your journey in the world of digital assets.</p>
            </div>
        </div>
        <div class="promotions">
            <div class="promo-card">
                <h3>0% Fees</h3>
                <p>Trade with zero fees on the spot market until the end of the month!</p>
                <button class="btn-primary">Learn More</button>
            </div>
            <div class="promo-card">
                <h3>Staking</h3>
                <p>Earn up to 8% annually on ETH and USDT staking.</p>
                <button class="btn-primary">Start Staking</button>
            </div>
            <div class="promo-card">
                <h3>Referral Program</h3>
                <p>Invite friends and earn 20% of their trading fees.</p>
                <button class="btn-primary">Invite a Friend</button>
            </div>
        </div>
        <div class="news-section">
            <h2>Cryptocurrency News</h2>
            <div class="news-list" id="news-list"></div>
        </div>
    </div>
    <div id="trading" class="main-content">
        <div class="trading-section">
            <div class="crypto-list">
                <h3>Cryptocurrencies</h3>
                <div id="crypto-items"></div>
            </div>
            <div class="trading-panel">
                <div class="buy-sell-form">
                    <h3>Trade <span id="selected-crypto">BTC</span></h3>
                    <div class="tabs">
                        <div class="tab active" onclick="setTradeMode('buy')">Buy</div>
                        <div class="tab" onclick="setTradeMode('sell')">Sell</div>
                    </div>
                    <div class="input-group">
                        <input type="number" id="trade-amount" placeholder="Amount ($)">
                    </div>
                    <div class="input-group">
                        <input type="number" id="crypto-amount" placeholder="Cryptocurrency Amount" readonly>
                    </div>
                    <button class="btn btn-primary" id="trade-btn" onclick="executeTrade()">Buy</button>
                </div>
                <div class="order-book">
                    <h3>Order Book</h3>
                    <table class="order-book-table">
                        <thead>
                            <tr>
                                <th>Price ($)</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody id="order-book-bids"></tbody>
                        <tbody id="order-book-asks"></tbody>
                    </table>
                </div>
                <div class="chart-container">
                    <h3>Chart <span id="chart-crypto">BTC</span>/USD</h3>
                    <div class="timeframe-selector">
                        <button class="timeframe-btn" onclick="setTimeframe('1h')">1h</button>
                        <button class="timeframe-btn" onclick="setTimeframe('4h')">4h</button>
                        <button class="timeframe-btn active" onclick="setTimeframe('1d')">1d</button>
                    </div>
                    <div id="trading-chart" class="chart"></div>
                </div>
            </div>
        </div>
    </div>
    <div id="wallet" class="main-content">
        <div class="card">
            <div class="wallet-section">
                <h2>Your Wallet</h2>
                <div class="balance">$<span id="wallet-balance-page">1000.00</span></div>
                <div class="deposit-form">
                    <h3>Deposit Funds</h3>
                    <div class="input-group">
                        <label>Select Cryptocurrency</label>
                        <select id="deposit-crypto">
                            <option value="BTC">Bitcoin (BTC)</option>
                            <option value="ETH">Ethereum (ETH)</option>
                            <option value="USDT">Tether (USDT)</option>
                            <option value="BNB">Binance Coin (BNB)</option>
                            <option value="LTC">Litecoin (LTC)</option>
                            <option value="TON">The Open Network (TON)</option>
                            <option value="XRP">Ripple (XRP)</option>
                            <option value="SOL">Solana (SOL)</option>
                            <option value="USDC">USD Coin (USDC)</option>
                            <option value="DOGE">Dogecoin (DOGE)</option>
                            <option value="TRX">Tron (TRX)</option>
                            <option value="ADA">Cardano (ADA)</option>
                            <option value="WBTC">Wrapped Bitcoin (WBTC)</option>
                            <option value="AVAX">Avalanche (AVAX)</option>
                            <option value="SHIB">Shiba Inu (SHIB)</option>
                            <option value="LINK">Chainlink (LINK)</option>
                            <option value="DOT">Polkadot (DOT)</option>
                            <option value="MATIC">Polygon (MATIC)</option>
                            <option value="BCH">Bitcoin Cash (BCH)</option>
                            <option value="UNI">Uniswap (UNI)</option>
                            <option value="XLM">Stellar (XLM)</option>
                            <option value="VET">VeChain (VET)</option>
                            <option value="ATOM">Cosmos (ATOM)</option>
                            <option value="FIL">Filecoin (FIL)</option>
                            <option value="ALGO">Algorand (ALGO)</option>
                            <option value="NEAR">NEAR Protocol (NEAR)</option>
                            <option value="ICP">Internet Computer (ICP)</option>
                            <option value="APT">Aptos (APT)</option>
                            <option value="ARB">Arbitrum (ARB)</option>
                            <option value="OP">Optimism (OP)</option>
                            <option value="INJ">Injective (INJ)</option>
                            <option value="SUI">Sui (SUI)</option>
                            <option value="XTZ">Tezos (XTZ)</option>
                            <option value="EOS">EOS</option>
                            <option value="HBAR">Hedera (HBAR)</option>
                            <option value="XMR">Monero (XMR)</option>
                            <option value="KSM">Kusama (KSM)</option>
                            <option value="AAVE">Aave (AAVE)</option>
                            <option value="MKR">Maker (MKR)</option>
                            <option value="GRT">The Graph (GRT)</option>
                            <option value="RUNE">THORChain (RUNE)</option>
                            <option value="FTM">Fantom (FTM)</option>
                            <option value="SAND">The Sandbox (SAND)</option>
                            <option value="MANA">Decentraland (MANA)</option>
                            <option value="AXS">Axie Infinity (AXS)</option>
                            <option value="CHZ">Chiliz (CHZ)</option>
                            <option value="CRV">Curve DAO Token (CRV)</option>
                            <option value="COMP">Compound (COMP)</option>
                            <option value="SNX">Synthetix (SNX)</option>
                            <option value="1INCH">1inch (1INCH)</option>
                            <option value="LDO">Lido DAO (LDO)</option>
                            <option value="RNDR">Render (RNDR)</option>
                            <option value="STX">Stacks (STX)</option>
                            <option value="IMX">Immutable (IMX)</option>
                            <option value="FLOW">Flow (FLOW)</option>
                            <option value="GALA">Gala (GALA)</option>
                            <option value="APE">ApeCoin (APE)</option>
                            <option value="EGLD">MultiversX (EGLD)</option>
                            <option value="KAVA">Kava (KAVA)</option>
                            <option value="ZEC">Zcash (ZEC)</option>
                            <option value="DASH">Dash (DASH)</option>
                            <option value="NEO">NEO</option>
                            <option value="IOTA">IOTA</option>
                            <option value="QTUM">Qtum (QTUM)</option>
                            <option value="WAVES">Waves (WAVES)</option>
                            <option value="ZIL">Zilliqa (ZIL)</option>
                            <option value="ENJ">Enjin Coin (ENJ)</option>
                            <option value="BAT">Basic Attention Token (BAT)</option>
                            <option value="LRC">Loopring (LRC)</option>
                            <option value="ANKR">Ankr (ANKR)</option>
                            <option value="RVN">Ravencoin (RVN)</option>
                            <option value="HOT">Holo (HOT)</option>
                            <option value="OMG">OMG Network (OMG)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Select Network</label>
                        <select id="deposit-network" onchange="updateWalletAddress()">
                            <option value="BTC">Bitcoin Network</option>
                            <option value="ETH">Ethereum (ERC-20)</option>
                            <option value="BSC">BNB Chain (BEP-20)</option>
                            <option value="TRON">Tron (TRC-20)</option>
                            <option value="SOL">Solana</option>
                            <option value="ADA">Cardano</option>
                            <option value="AVAX">Avalanche C-Chain</option>
                            <option value="MATIC">Polygon</option>
                            <option value="DOT">Polkadot</option>
                            <option value="ALGO">Algorand</option>
                            <option value="NEAR">NEAR</option>
                            <option value="APT">Aptos</option>
                            <option value="ARB">Arbitrum</option>
                            <option value="OP">Optimism</option>
                            <option value="SUI">Sui</option>
                            <option value="XTZ">Tezos</option>
                            <option value="EOS">EOS</option>
                            <option value="HBAR">Hedera</option>
                            <option value="XMR">Monero</option>
                            <option value="KSM">Kusama</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Deposit Address</label>
                        <div class="wallet-address" id="wallet-address">Select Network</div>
                    </div>
                    <div class="input-group">
                        <label>Amount</label>
                        <input type="number" id="deposit-amount-page" placeholder="Enter Amount">
                    </div>
                    <button class="btn btn-primary" onclick="depositFunds()">Deposit</button>
                </div>
            </div>
        </div>
    </div>
    <div id="portfolio" class="main-content">
        <h2>Your Portfolio</h2>
        <div class="portfolio-grid" id="portfolio-grid"></div>
    </div>
    <div id="history" class="main-content">
        <div class="card">
            <h2>Transaction History</h2>
            <table class="transactions-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Cryptocurrency</th>
                        <th>Amount</th>
                        <th>Price</th>
                        <th>Total</th>
                        <th>Status</th>
                        <th>P&L</th>
                    </tr>
                </thead>
                <tbody id="transactions-tbody"></tbody>
            </table>
        </div>
    </div>
    <button class="support-button" title="Support" onclick="toggleSupportChat()">💬</button>
    <div class="support-chat" id="support-chat">
        <div class="chat-header">
            <h3>TrustBit Support</h3>
            <button class="chat-close" onclick="toggleSupportChat()">✩</button>
        </div>
        <div class="chat-body" id="chat-body">
            <div class="chat-message support">Welcome! How can I assist you?</div>
        </div>
        <div class="chat-input">
            <input type="text" id="chat-input" placeholder="Enter message...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>
    <div class="custom-footer">
        <div class="footer-section">
            <h3>Бит доверие</h3>
            <a href="#">О нас</a>
            <a href="#">Команда</a>
            <a href="#">Поддержка</a>
        </div>
        <div class="footer-section">
            <h3>Характеристики</h3>
            <a href="#">Технические данные</a>
            <a href="#">Безопасность</a>
            <a href="#">Производительность</a>
        </div>
        <div class="footer-section">
            <h3>Рыночные инструменты</h3>
            <a href="#">Аналитика</a>
            <a href="#">Индикаторы</a>
            <a href="#">Торговые сигналы</a>
        </div>
        <div class="footer-section">
            <h3>Юридическая информация</h3>
            <a href="#">Политика конфиденциальности</a>
            <a href="#">Условия использования</a>
            <a href="#">Лицензии</a>
        </div>
        <div class="footer-section">
            <h3>Обменная пара</h3>
            <a href="#">BTC/USD</a>
            <a href="#">ETH/USDT</a>
            <a href="#">ADA/USDT</a>
        </div>
    </div>
    <script>
        let balance = 1000;
        let portfolio = {};
        let transactions = [];
        let cryptoPrices = {
            BTC: 0, ETH: 0, USDT: 0, BNB: 0, LTC: 0, TON: 0, XRP: 0, SOL: 0, USDC: 0, DOGE: 0,
            TRX: 0, ADA: 0, WBTC: 0, AVAX: 0, SHIB: 0, LINK: 0, DOT: 0, MATIC: 0, BCH: 0, UNI: 0,
            XLM: 0, VET: 0, ATOM: 0, FIL: 0, ALGO: 0, NEAR: 0, ICP: 0, APT: 0, ARB: 0, OP: 0,
            INJ: 0, SUI: 0, XTZ: 0, EOS: 0, HBAR: 0, XMR: 0, KSM: 0, AAVE: 0, MKR: 0, GRT: 0,
            RUNE: 0, FTM: 0, SAND: 0, MANA: 0, AXS: 0, CHZ: 0, CRV: 0, COMP: 0, SNX: 0, '1INCH': 0,
            LDO: 0, RNDR: 0, STX: 0, IMX: 0, FLOW: 0, GALA: 0, APE: 0, EGLD: 0, KAVA: 0, ZEC: 0,
            DASH: 0, NEO: 0, IOTA: 0, QTUM: 0, WAVES: 0, ZIL: 0, ENJ: 0, BAT: 0, LRC: 0, ANKR: 0,
            RVN: 0, HOT: 0, OMG: 0
        };
        let cryptoPriceHistory = Object.fromEntries(Object.keys(cryptoPrices).map(c => [c, []]));
        let priceChanges = Object.fromEntries(Object.keys(cryptoPrices).map(c => [c, 0]));
        let previousPrices = { ...cryptoPrices };
        let selectedCrypto = 'BTC';
        let tradeMode = 'buy';
        let chart = null;
        let candlestickSeries = null;
        let currentTimeframe = '1d';
        const cryptoIdMap = {
            BTC: 'bitcoin', ETH: 'ethereum', USDT: 'tether', BNB: 'binancecoin', LTC: 'litecoin',
            TON: 'the-open-network', XRP: 'ripple', SOL: 'solana', USDC: 'usd-coin', DOGE: 'dogecoin',
            TRX: 'tron', ADA: 'cardano', WBTC: 'wrapped-bitcoin', AVAX: 'avalanche-2', SHIB: 'shiba-inu',
            LINK: 'chainlink', DOT: 'polkadot', MATIC: 'matic-network', BCH: 'bitcoin-cash',
            UNI: 'uniswap', XLM: 'stellar', VET: 'vechain', ATOM: 'cosmos', FIL: 'filecoin',
            ALGO: 'algorand', NEAR: 'near', ICP: 'internet-computer', APT: 'aptos',
            ARB: 'arbitrum', OP: 'optimism', INJ: 'injective-protocol', SUI: 'sui',
            XTZ: 'tezos', EOS: 'eos', HBAR: 'hedera-hashgraph', XMR: 'monero',
            KSM: 'kusama', AAVE: 'aave', MKR: 'maker', GRT: 'the-graph', RUNE: 'thorchain',
            FTM: 'fantom', SAND: 'the-sandbox', MANA: 'decentraland', AXS: 'axie-identity',
            CHZ: 'chiliz', CRV: 'curve-dao-token', COMP: 'compound-governance-token',
            SNX: 'havven', '1INCH': '1inch', LDO: 'lido-dao', RNDR: 'render-token',
            STX: 'blockstack', IMX: 'immutable-x', FLOW: 'flow', GALA: 'gala',
            APE: 'apecoin', EGLD: 'elrond-erd-2', KAVA: 'kava', ZEC: 'zcash',
            DASH: 'dash', NEO: 'neo', IOTA: 'iota', QTUM: 'qtum', WAVES: 'waves',
            ZIL: 'zilliqa', ENJ: 'enjin-coin', BAT: 'basic-attention-token',
            LRC: 'loopring', ANKR: 'ankr', RVN: 'ravencoin', HOT: 'holotoken',
            OMG: 'omisego'
        };
        const cryptoSymbols = {
            BTC: '₿', ETH: 'Ξ', USDT: '₮', BNB: 'B', LTC: 'Ł', TON: '$', XRP: 'Ʀ', SOL: '◎',
            USDC: '₡', DOGE: 'Ð', TRX: '₮', ADA: '₳', WBTC: '₿', AVAX: 'Ⓐ', SHIB: '柴',
            LINK: '🔗', DOT: '⚫', MATIC: '⬣', BCH: '₿', UNI: '🦄', XLM: '✦', VET: 'V',
            ATOM: '⚛', FIL: '📁', ALGO: 'Ⓐ', NEAR: 'Ⓝ', ICP: '🧠', APT: 'ⓐ', ARB: 'Ⓐ',
            OP: 'Ⓞ', INJ: '💉', SUI: 'Ⓢ', XTZ: 'ꜩ', EOS: 'ⓔ', HBAR: 'ℏ', XMR: 'ɱ',
            KSM: 'Ⓚ', AAVE: 'Ⓐ', MKR: 'Ⓜ', GRT: '📈', RUNE: 'ᚱ', FTM: '👻',
            SAND: '🏖', MANA: 'Ⓜ', AXS: '🪓', CHZ: '⚽', CRV: 'Ⓒ', COMP: 'Ⓒ',
            SNX: 'Ⓢ', '1INCH': '1"', LDO: 'Ⓛ', RNDR: '🎨', STX: 'Ⓢ', IMX: 'Ⓘ',
            FLOW: '🌊', GALA: '🎮', APE: '🦍', EGLD: 'Ⓔ', KAVA: '☕', ZEC: 'Ⓩ',
            DASH: 'ⓓ', NEO: 'Ⓝ', IOTA: 'ⓘ', QTUM: 'Ⓠ', WAVES: '🌊', ZIL: 'Ⓩ',
            ENJ: 'Ⓔ', BAT: '🦇', LRC: 'Ⓛ', ANKR: '⚓', RVN: 'Ⓡ', HOT: '🔥',
            OMG: '🕉'
        };

        function showSection(sectionId) {
            document.querySelectorAll('.main-content').forEach(section => section.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            document.querySelectorAll('.nav a').forEach(link => link.classList.remove('active'));
            document.querySelector(`.nav a[onclick="showSection('${sectionId}')"]`).classList.add('active');
            if (sectionId === 'trading') updateChart();
        }

        function renderCryptoList() {
            const cryptoItems = document.getElementById('crypto-items');
            if (!cryptoItems) {
                console.error('Crypto items container not found');
                return;
            }
            cryptoItems.innerHTML = '';
            const colorMap = {
                BTC: { start: 'f7931a', end: 'ffb74d' }, ETH: { start: '627eea', end: '8e44ad' },
                USDT: { start: '26a17b', end: '5ac8a8' }, BNB: { start: 'f3ba2f', end: 'f7de8a' },
                LTC: { start: 'b5b5b5', end: 'd9d9d9' }, TON: { start: '0088cc', end: '00b7eb' },
                XRP: { start: '222222', end: '555555' }, SOL: { start: '00ffa3', end: 'dc1fff' },
                USDC: { start: '2775ca', end: '5a9bd4' }, DOGE: { start: 'c3a634', end: 'e6c44f' },
                TRX: { start: 'eb0029', end: 'ff4d4d' }, ADA: { start: '3c84b9', end: '60a5fa' },
                WBTC: { start: 'f7931a', end: 'ffb74d' }, AVAX: { start: 'e84142', end: 'ff6b6b' },
                SHIB: { start: 'ff4500', end: 'ff8c00' }, LINK: { start: '2a5ada', end: '5a9bd4' },
                DOT: { start: 'e6007a', end: 'ff4d8c' }, MATIC: { start: '8247e5', end: 'a78bfa' },
                BCH: { start: '8dc351', end: 'b3e67a' }, UNI: { start: 'ff007a', end: 'ff4d8c' },
                XLM: { start: '000000', end: '333333' }, VET: { start: '15bffd', end: '4ddbff' },
                ATOM: { start: '2e3148', end: '4a5d78' }, FIL: { start: '0090ff', end: '4dc3ff' },
                ALGO: { start: '000000', end: '333333' }, NEAR: { start: '00e3ae', end: '4dffcd' },
                ICP: { start: 'd81f26', end: 'ff4d4d' }, APT: { start: '17e6b9', end: '4dffd4' },
                ARB: { start: '2a3b5a', end: '5a7aa8' }, OP: { start: 'ff0420', end: 'ff4d4d' },
                INJ: { start: '1e4dd8', end: '4d8bff' }, SUI: { start: '1a8cff', end: '4db3ff' },
                XTZ: { start: '2c7df7', end: '5aa8ff' }, EOS: { start: '000000', end: '333333' },
                HBAR: { start: '000000', end: '333333' }, XMR: { start: 'ff6600', end: 'ff9933' },
                KSM: { start: '000000', end: '333333' }, AAVE: { start: 'b6509e', end: 'e68bc5' },
                MKR: { start: '1aab9b', end: '4dd4b3' }, GRT: { start: '6747ed', end: '8b6bff' },
                RUNE: { start: '00d18b', end: '4dffa8' }, FTM: { start: '1969ff', end: '4d8bff' },
                SAND: { start: '00aeef', end: '4ddbff' }, MANA: { start: 'ff2a44', end: 'ff6b7a' },
                AXS: { start: '0085d2', end: '4db3ff' }, CHZ: { start: 'e30013', end: 'ff4d4d' },
                CRV: { start: '4066e0', end: '6b8bff' }, COMP: { start: '00d395', end: '4dffa8' },
                SNX: { start: '00d1ff', end: '4dffff' }, '1INCH': { start: '1f3b5b', end: '4d7aa8' },
                LDO: { start: '00a3ff', end: '4ddbff' }, RNDR: { start: 'ff3c3c', end: 'ff7a7a' },
                STX: { start: '5548de', end: '7a6bff' }, IMX: { start: '00c4b4', end: '4dffcd' },
                FLOW: { start: '00ef8b', end: '4dffa8' }, GALA: { start: '000000', end: '333333' },
                APE: { start: '0033cc', end: '4d7aff' }, EGLD: { start: '0d0221', end: '333366' },
                KAVA: { start: 'ff4338', end: 'ff7a7a' }, ZEC: { start: 'f4b728', end: 'ffd966' },
                DASH: { start: '008ce7', end: '4db3ff' }, NEO: { start: '58bf00', end: '8bff4d' },
                IOTA: { start: '000000', end: '333333' }, QTUM: { start: '2e9dfd', end: '6bb8ff' },
                WAVES: { start: '0153ff', end: '4d8bff' }, ZIL: { start: '49a49b', end: '7ad4b3' },
                ENJ: { start: '624de4', end: '8b6bff' }, BAT: { start: 'ff5000', end: 'ff8c4d' },
                LRC: { start: '2ab6f6', end: '6bd4ff' }, ANKR: { start: '1e4dd8', end: '4d8bff' },
                RVN: { start: '3848a0', end: '6b7aa8' }, HOT: { start: 'ff3c3c', end: 'ff7a7a' },
                OMG: { start: '1a1a1a', end: '4d4d4d' },
                default: { start: '7e6bff', end: '5a4bff' }
            };
            Object.keys(cryptoPrices).forEach(crypto => {
                const colors = colorMap[crypto] || colorMap.default;
                const item = document.createElement('div');
                item.className = 'crypto-item';
                item.onclick = () => selectCrypto(crypto);
                const name = cryptoIdMap[crypto] ? cryptoIdMap[crypto].replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()) : crypto;
                item.innerHTML = `
                    <div class="crypto-info">
                        <div class="crypto-icon" style="background: linear-gradient(45deg, #${colors.start}, #${colors.end});">${cryptoSymbols[crypto] || crypto.charAt(0)}</div>
                        <div>
                            <div>${name}</div>
                            <div style="font-size: 12px; opacity: 0.7;">${crypto}</div>
                        </div>
                    </div>
                    <div class="crypto-price">
                        <div class="price">$<span id="${crypto.toLowerCase()}-price">0</span></div>
                        <div class="change" id="${crypto.toLowerCase()}-change">0%</div>
                    </div>
                `;
                cryptoItems.appendChild(item);
            });
        }

        document.querySelector('.profile-btn').addEventListener('click', () => {
            const dropdown = document.querySelector('.dropdown-menu');
            if (dropdown) {
                dropdown.classList.toggle('active');
            } else {
                console.error('Dropdown menu not found');
            }
        });

        function setTradeMode(mode) {
            tradeMode = mode;
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            const activeTab = document.querySelector(`.tab[onclick="setTradeMode('${mode}')"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            } else {
                console.error(`Tab for mode '${mode}' not found`);
            }
            const tradeBtn = document.getElementById('trade-btn');
            if (tradeBtn) {
                tradeBtn.textContent = mode === 'buy' ? 'Buy' : 'Sell';
            } else {
                console.error('Trade button not found');
            }
        }

        function selectCrypto(crypto) {
            selectedCrypto = crypto;
            const selectedCryptoEl = document.getElementById('selected-crypto');
            const chartCryptoEl = document.getElementById('chart-crypto');
            if (selectedCryptoEl && chartCryptoEl) {
                selectedCryptoEl.textContent = crypto;
                chartCryptoEl.textContent = crypto;
                updateChart();
                updateOrderBook();
            } else {
                console.error('Selected crypto or chart crypto element not found');
            }
        }

        function setTimeframe(timeframe) {
            currentTimeframe = timeframe;
            const timeframeButtons = document.querySelectorAll('.timeframe-btn');
            timeframeButtons.forEach(btn => btn.classList.remove('active'));
            const activeBtn = document.querySelector(`.timeframe-btn[onclick="setTimeframe('${timeframe}')"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
                updateChart();
            } else {
                console.error(`Timeframe button for '${timeframe}' not found`);
            }
        }

        function updateWalletAddress() {
            const network = document.getElementById('deposit-network').value;
            const crypto = document.getElementById('deposit-crypto').value;
            const addressPrefix = {
                BTC: 'bc1', ETH: '0x', BSC: '0x', TRON: 'T', SOL: 'sol', ADA: 'addr',
                AVAX: 'avax', MATIC: '0x', DOT: '1', ALGO: 'algo', NEAR: 'near',
                APT: 'apt', ARB: '0x', OP: '0x', SUI: 'sui', XTZ: 'tz',
                EOS: 'eos', HBAR: 'hbar', XMR: '4x', KSM: 'ksm'
            };
            const randomId = Math.random().toString(16).slice(2, 34);
            const address = `${addressPrefix[network] || '0x'}${randomId}`;
            document.getElementById('wallet-address').textContent = address;
        }

        async function fetchCryptoPrices() {
            try {
                const coins = Object.values(cryptoIdMap);
                const batchSize = 30;
                for (let i = 0; i < coins.length; i += batchSize) {
                    const batch = coins.slice(i, i + batchSize).join(',');
                    const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${batch}&vs_currencies=usd&include_24hr_change=true`);
                    if (!response.ok) throw new Error(`HTTP error: ${response.status}`);
                    const data = await response.json();
                    Object.keys(cryptoIdMap).forEach(symbol => {
                        const id = cryptoIdMap[symbol];
                        if (data[id]) {
                            previousPrices[symbol] = cryptoPrices[symbol];
                            cryptoPrices[symbol] = parseFloat(data[id].usd);
                            priceChanges[symbol] = parseFloat(data[id].usd_24h_change).toFixed(2);
                            cryptoPriceHistory[symbol].push({ time: Math.floor(Date.now() / 1000), value: cryptoPrices[symbol] });
                            if (cryptoPriceHistory[symbol].length > 50) cryptoPriceHistory[symbol].shift();
                        }
                    });
                }
                updateCryptoList();
                updatePortfolio();
                if (document.getElementById('trading').classList.contains('active')) updateLiveCandle();
            } catch (error) {
                console.error('Error fetching prices:', error.message);
                Object.keys(cryptoPrices).forEach(symbol => {
                    if (cryptoPrices[symbol] === 0) {
                        cryptoPrices[symbol] = Math.random() * 10000 + 1000;
                        priceChanges[symbol] = ((Math.random() - 0.5) * 10).toFixed(2);
                        cryptoPriceHistory[symbol].push({ time: Math.floor(Date.now() / 1000), value: cryptoPrices[symbol] });
                        if (cryptoPriceHistory[symbol].length > 50) cryptoPriceHistory[symbol].shift();
                    }
                });
                updateCryptoList();
                updatePortfolio();
            }
        }

        async function fetchNews() {
            try {
                const apiKey = 'cee5353296df40ec9a461b683083e5c2';
                const response = await fetch(`https://newsapi.org/v2/everything?q=cryptocurrency&language=en&sortBy=publishedAt&apiKey=${apiKey}`);
                if (!response.ok) throw new Error(`HTTP error: ${response.status}`);
                const data = await response.json();
                if (data.status === 'error') throw new Error(`NewsAPI error: ${data.message}`);
                const newsList = document.getElementById('news-list');
                newsList.innerHTML = '';
                data.articles.slice(0, 5).forEach(article => {
                    const item = document.createElement('div');
                    item.className = 'news-item';
                    item.innerHTML = `
                        <div class="news-content">
                            <h3>${article.title}</h3>
                            <p>${article.description || 'No details available'}</p>
                            <div class="source">${article.source.name}</div>
                        </div>
                    `;
                    newsList.appendChild(item);
                });
            } catch (error) {
                console.error('Error fetching news:', error.message);
                const newsList = document.getElementById('news-list');
                newsList.innerHTML = '';
                const mockNews = [
                    { title: "Bitcoin Hits New All-Time High", description: "The largest cryptocurrency continues its rally.", source: "CoinDesk" },
                    { title: "Ethereum Prepares for Upgrade", description: "New upgrade to reduce transaction fees.", source: "The Block" },
                    { title: "Tether Strengthens Market Position", description: "USDT remains the leading stablecoin.", source: "CryptoSlate" },
                    { title: "Binance Coin Surges", description: "BNB shows significant growth.", source: "CoinTelegraph" }
                ];
                mockNews.forEach(news => {
                    const item = document.createElement('div');
                    item.className = 'news-item';
                    item.innerHTML = `
                        <div class="news-content">
                            <h3>${news.title}</h3>
                            <p>${news.description}</p>
                            <div class="source">${news.source}</div>
                        </div>
                    `;
                    newsList.appendChild(item);
                });
            }
        }

        function updateCryptoList() {
            Object.keys(cryptoPrices).forEach(crypto => {
                const priceElement = document.getElementById(`${crypto.toLowerCase()}-price`);
                const changeElement = document.getElementById(`${crypto.toLowerCase()}-change`);
                if (priceElement && changeElement) {
                    priceElement.textContent = cryptoPrices[crypto].toFixed(2);
                    changeElement.textContent = `${priceChanges[crypto]}%`;
                    changeElement.className = `change ${priceChanges[crypto] >= 0 ? 'positive' : 'negative'}`;
                }
            });
        }

        function updateOrderBook() {
            const bidsTbody = document.getElementById('order-book-bids');
            const asksTbody = document.getElementById('order-book-asks');
            bidsTbody.innerHTML = '';
            asksTbody.innerHTML = '';
            const price = cryptoPrices[selectedCrypto] || 1000;
            for (let i = 5; i >= 1; i--) {
                const bidPrice = (price * (1 - i * 0.001)).toFixed(2);
                const askPrice = (price * (1 + i * 0.001)).toFixed(2);
                const bidAmount = (Math.random() * 10).toFixed(4);
                const askAmount = (Math.random() * 10).toFixed(4);
                bidsTbody.innerHTML += `<tr class="buy"><td>${bidPrice}</td><td>${bidAmount}</td></tr>`;
                asksTbody.innerHTML += `<tr class="sell"><td>${askPrice}</td><td>${askAmount}</td></tr>`;
            }
        }

        function depositFunds() {
            const amount = parseFloat(document.getElementById('deposit-amount-page').value);
            const crypto = document.getElementById('deposit-crypto').value;
            if (amount > 0 && cryptoPrices[crypto] > 0) {
                balance += amount;
                portfolio[crypto] = (portfolio[crypto] || 0) + (amount / cryptoPrices[crypto]);
                document.getElementById('wallet-balance-page').textContent = balance.toFixed(2);
                transactions.push({
                    date: new Date().toLocaleString(),
                    type: 'Deposit',
                    crypto,
                    amount: (amount / cryptoPrices[crypto]).toFixed(6),
                    price: `$${cryptoPrices[crypto].toFixed(2)}`,
                    total: `$${amount.toFixed(2)}`,
                    status: 'Success',
                    pl: `+$${amount.toFixed(2)}`
                });
                updateTransactions();
                updatePortfolio();
                document.getElementById('deposit-amount-page').value = '';
            } else {
                alert('Please enter a valid amount or wait for prices to load');
            }
        }

        function executeTrade() {
            const amount = parseFloat(document.getElementById('trade-amount').value);
            const cryptoAmount = parseFloat(document.getElementById('crypto-amount').value);
            if (amount <= 0 || isNaN(amount) || cryptoAmount <= 0 || isNaN(cryptoAmount) || !cryptoPrices[selectedCrypto]) {
                alert('Please enter a valid amount or wait for prices to load');
                return;
            }
            if (tradeMode === 'buy') {
                if (amount <= balance) {
                    balance -= amount;
                    portfolio[selectedCrypto] = (portfolio[selectedCrypto] || 0) + cryptoAmount;
                    transactions.push({
                        date: new Date().toLocaleString(),
                        type: 'Buy',
                        crypto: selectedCrypto,
                        amount: cryptoAmount.toFixed(6),
                        price: `$${cryptoPrices[selectedCrypto].toFixed(2)}`,
                        total: `$${amount.toFixed(2)}`,
                        status: 'Success',
                        pl: '-'
                    });
                } else {
                    alert('Insufficient funds');
                    transactions.push({
                        date: new Date().toLocaleString(),
                        type: 'Buy',
                        crypto: selectedCrypto,
                        amount: cryptoAmount.toFixed(6),
                        price: `$${cryptoPrices[selectedCrypto].toFixed(2)}`,
                        total: `$${amount.toFixed(2)}`,
                        status: 'Failed',
                        pl: '-'
                    });
                }
            } else {
                if (portfolio[selectedCrypto] && portfolio[selectedCrypto] >= cryptoAmount) {
                    balance += amount;
                    portfolio[selectedCrypto] -= cryptoAmount;
                    if (portfolio[selectedCrypto] === 0) delete portfolio[selectedCrypto];
                    transactions.push({
                        date: new Date().toLocaleString(),
                        type: 'Sell',
                        crypto: selectedCrypto,
                        amount: cryptoAmount.toFixed(6),
                        price: `$${cryptoPrices[selectedCrypto].toFixed(2)}`,
                        total: `$${amount.toFixed(2)}`,
                        status: 'Success',
                        pl: '-'
                    });
                } else {
                    alert('Insufficient cryptocurrency');
                    transactions.push({
                        date: new Date().toLocaleString(),
                        type: 'Sell',
                        crypto: selectedCrypto,
                        amount: cryptoAmount.toFixed(6),
                        price: `$${cryptoPrices[selectedCrypto].toFixed(2)}`,
                        total: `$${amount.toFixed(2)}`,
                        status: 'Failed',
                        pl: '-'
                    });
                }
            }
            document.getElementById('wallet-balance-page').textContent = balance.toFixed(2);
            updatePortfolio();
            updateTransactions();
            document.getElementById('trade-amount').value = '';
            document.getElementById('crypto-amount').value = '';
        }

        function updatePortfolio() {
            const portfolioGrid = document.getElementById('portfolio-grid');
            portfolioGrid.innerHTML = '';
            const colorMap = {
                BTC: { start: 'f7931a', end: 'ffb74d' }, ETH: { start: '627eea', end: '8e44ad' },
                USDT: { start: '26a17b', end: '5ac8a8' }, BNB: { start: 'f3ba2f', end: 'f7de8a' },
                LTC: { start: 'b5b5b5', end: 'd9d9d9' }, TON: { start: '0088cc', end: '00b7eb' },
                XRP: { start: '222222', end: '555555' }, SOL: { start: '00ffa3', end: 'dc1fff' },
                USDC: { start: '2775ca', end: '5a9bd4' }, DOGE: { start: 'c3a634', end: 'e6c44f' },
                TRX: { start: 'eb0029', end: 'ff4d4d' }, ADA: { start: '3c84b9', end: '60a5fa' },
                WBTC: { start: 'f7931a', end: 'ffb74d' }, AVAX: { start: 'e84142', end: 'ff6b6b' },
                SHIB: { start: 'ff4500', end: 'ff8c00' }, LINK: { start: '2a5ada', end: '5a9bd4' },
                DOT: { start: 'e6007a', end: 'ff4d8c' }, MATIC: { start: '8247e5', end: 'a78bfa' },
                BCH: { start: '8dc351', end: 'b3e67a' }, UNI: { start: 'ff007a', end: 'ff4d8c' },
                XLM: { start: '000000', end: '333333' }, VET: { start: '15bffd', end: '4ddbff' },
                ATOM: { start: '2e3148', end: '4a5d78' }, FIL: { start: '0090ff', end: '4dc3ff' },
                ALGO: { start: '000000', end: '333333' }, NEAR: { start: '00e3ae', end: '4dffcd' },
                ICP: { start: 'd81f26', end: 'ff4d4d' }, APT: { start: '17e6b9', end: '4dffd4' },
                ARB: { start: '2a3b5a', end: '5a7aa8' }, OP: { start: 'ff0420', end: 'ff4d4d' },
                INJ: { start: '1e4dd8', end: '4d8bff' }, SUI: { start: '1a8cff', end: '4db3ff' },
                XTZ: { start: '2c7df7', end: '5aa8ff' }, EOS: { start: '000000', end: '333333' },
                HBAR: { start: '000000', end: '333333' }, XMR: { start: 'ff6600', end: 'ff9933' },
                KSM: { start: '000000', end: '333333' }, AAVE: { start: 'b6509e', end: 'e68bc5' },
                MKR: { start: '1aab9b', end: '4dd4b3' }, GRT: { start: '6747ed', end: '8b6bff' },
                RUNE: { start: '00d18b', end: '4dffa8' }, FTM: { start: '1969ff', end: '4d8bff' },
                SAND: { start: '00aeef', end: '4ddbff' }, MANA: { start: 'ff2a44', end: 'ff6b7a' },
                AXS: { start: '0085d2', end: '4db3ff' }, CHZ: { start: 'e30013', end: 'ff4d4d' },
                CRV: { start: '4066e0', end: '6b8bff' }, COMP: { start: '00d395', end: '4dffa8' },
                SNX: { start: '00d1ff', end: '4dffff' }, '1INCH': { start: '1f3b5b', end: '4d7aa8' },
                LDO: { start: '00a3ff', end: '4ddbff' }, RNDR: { start: 'ff3c3c', end: 'ff7a7a' },
                STX: { start: '5548de', end: '7a6bff' }, IMX: { start: '00c4b4', end: '4dffcd' },
                FLOW: { start: '00ef8b', end: '4dffa8' }, GALA: { start: '000000', end: '333333' },
                APE: { start: '0033cc', end: '4d7aff' }, EGLD: { start: '0d0221', end: '333366' }, KAVA: { start: 'ff4338', end: 'ff7a7a' }, ZEC: { start: 'f4b728', end: 'ffd966' },
DASH: { start: '008ce7', end: '4db3ff' }, NEO: { start: '58bf00', end: '8bff4d' },
IOTA: { start: '000000', end: '333333' }, QTUM: { start: '2e9dfd', end: '6bb8ff' },
WAVES: { start: '0153ff', end: '4d8bff' }, ZIL: { start: '49a49b', end: '7ad4b3' },
ENJ: { start: '624de4', end: '8b6bff' }, BAT: { start: 'ff5000', end: 'ff8c4d' },
LRC: { start: '2ab6f6', end: '6bd4ff' }, ANKR: { start: '1e4dd8', end: '4d8bff' },
RVN: { start: '3848a0', end: '6b7aa8' }, HOT: { start: 'ff3c3c', end: 'ff7a7a' },
OMG: { start: '1a1a1a', end: '4d4d4d' }, default: { start: '7e6bff', end: '5a4bff' }
};

Object.keys(portfolio).forEach(crypto => {
if (portfolio[crypto] > 0 && cryptoPrices[crypto]) {
const colors = colorMap[crypto] || colorMap.default;
const item = document.createElement('div');
item.className = 'portfolio-item';
const value = portfolio[crypto] * cryptoPrices[crypto];
item.innerHTML = `

${cryptoSymbols[crypto] || crypto.charAt(0)}
${crypto}
${portfolio[crypto].toFixed(6)}
$${value.toFixed(2)}
`; portfolioGrid.appendChild(item); } }); }
function updateTransactions() {
const tbody = document.getElementById('transactions-tbody');
tbody.innerHTML = '';
transactions.slice(-10).forEach(tx => {
const row = document.createElement('tr');
row.innerHTML = `

${tx.date} ${tx.type} ${tx.crypto} ${tx.amount} ${tx.price} ${tx.total} ${tx.status} ${tx.pl} `; tbody.appendChild(row); }); }
function updateLiveCandle() {
if (!chart || !candlestickSeries) {
const chartContainer = document.getElementById('trading-chart');
chart = LightweightCharts.createChart(chartContainer, {
width: chartContainer.clientWidth,
height: 300,
layout: { backgroundColor: '#1a1a2e', textColor: '#e6e6e6' },
grid: { vertLines: { color: 'rgba(255, 255, 255, 0.1)' }, horzLines: { color: 'rgba(255, 255, 255, 0.1)' } },
timeScale: { timeVisible: true, secondsVisible: false }
});
candlestickSeries = chart.addCandlestickSeries({
upColor: '#43e97b',
downColor: '#f5576c',
borderVisible: false,
wickUpColor: '#43e97b',
wickDownColor: '#f5576c'
});
}
const data = cryptoPriceHistory[selectedCrypto].map(d => ({
time: d.time,
open: d.value,
high: d.value * (1 + Math.random() * 0.01),
low: d.value * (1 - Math.random() * 0.01),
close: d.value
}));
candlestickSeries.setData(data);
chart.timeScale().fitContent();
}

function updateChart() {
updateLiveCandle();
}

document.getElementById('trade-amount').addEventListener('input', () => {
const amount = parseFloat(document.getElementById('trade-amount').value) || 0;
const cryptoAmount = amount / (cryptoPrices[selectedCrypto] || 1000);
document.getElementById('crypto-amount').value = cryptoAmount.toFixed(6);
});

function toggleSupportChat() {
const chat = document.getElementById('support-chat');
if (chat) {
chat.classList.toggle('active');
} else {
console.error('Support chat element not found');
}
}

function sendMessage() {
const input = document.getElementById('chat-input');
const message = input.value.trim();
if (message) {
const chatBody = document.getElementById('chat-body');
if (chatBody) {
const userMessage = document.createElement('div');
userMessage.className = 'chat-message user';
userMessage.textContent = message;
chatBody.appendChild(userMessage);
chatBody.scrollTop = chatBody.scrollHeight;
input.value = '';
setTimeout(() => {
const supportMessage = document.createElement('div');
supportMessage.className = 'chat-message support';
supportMessage.textContent = 'Thank you for your message! We will get back to you soon.';
chatBody.appendChild(supportMessage);
chatBody.scrollTop = chatBody.scrollHeight;
}, 1000);
} else {
console.error('Chat body not found');
}
}
}

renderCryptoList();
fetchNews();
fetchCryptoPrices();
setInterval(fetchCryptoPrices, 60000);
updateWalletAddress();
updatePortfolio();
updateTransactions();
updateOrderBook();
document.querySelectorAll('.timeframe-btn').forEach(btn => {
if (btn.textContent === currentTimeframe) btn.classList.add('active');
});

window.addEventListener('resize', () => {
if (chart) {
chart.resize(document.getElementById('trading-chart').clientWidth, 300);
chart.timeScale().fitContent();
}
});
</script>
</body>
</html>
